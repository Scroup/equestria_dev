STG_revolution_in_eqs_bal_van = {
	BAL_VAN_declare_on_EQS = {
		allowed = {
			always = no
		}
		activation = {
			STG = { has_war_with = FROM }
		}
		available = {
			OR = {
				has_war_with = FROM
			}
		}
		days_mission_timeout = 30

		war_with_target_on_timeout = yes

		is_good = no

		timeout_effect = {
			if = {
				limit = { STG = { is_faction_leader = yes } }
				STG = { add_to_faction = PREV }
			}
			add_to_war = { 
				targeted_alliance = STG 
				enemy = FROM 
			}
		}
		complete_effect = {
			if = {
				limit = { STG = { is_faction_leader = yes } }
				STG = { add_to_faction = PREV }
			}
		}
	}
}

STG_revolution_in_eqs = {
	STG_war_breaks_out = {
		icon = generic_ignite_civil_war
		activation = {
			event_target:equestria = {
				communism > 0.35
			}
			has_completed_focus = STG_influence_EQS
		}
		available = {
			event_target:equestria = {
				communism < 0.35
			}
		}
		is_good = no
		days_mission_timeout = 90
		war_with_target_on_timeout = yes
		timeout_effect = {
			country_event = stalliongrad_eqs_cw.6
		}
	}
	STG_communism_stamped_out = {
		icon = anti_communist
		activation = {
			event_target:equestria = {
				communism < 0.02
			}
			has_completed_focus = STG_influence_EQS
			NOT = { has_country_flag = STG_EQS_CW_delay_mission }
		}
		available = {
			event_target:equestria = {
				communism > 0.05
			}
		}
		is_good = no
		days_mission_timeout = 21
		timeout_effect = {
			country_event = stalliongrad_eqs_cw.7
			hidden_effect = {
				 event_target:equestria = { country_event = stalliongrad_eqs_cw.8 }
			}
		}
	}
	STG_start_influence_EQS_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
					has_idea = STG_start_influence_EQS_idea
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_idea = STG_start_influence_EQS_idea } }
			}
		}
		cost = 0
		days_remove = -1
		days_re_enable = 60
		modifier = {
			political_power_gain = -0.2
		}
		complete_effect = {
			FROM = {
				add_ideas = STG_start_influence_EQS_idea
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism > 0.35 }
				strength_ratio = {
					tag = FROM
					ratio < 0.75
				}
			}
			modifier = {
				factor = 0
				political_power_growth < 0.7
			}
			modifier = {
				add = 20
				FROM = { communism < 0.03 }
			}
		}
	}
	STG_stop_influence_EQS_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			FROM = {
				has_idea = STG_start_influence_EQS_idea
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		cost = 0
		complete_effect = {
			remove_targeted_decision = { target = FROM decision =  STG_start_influence_EQS_dec }
			FROM = {
				remove_ideas = STG_start_influence_EQS_idea
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				FROM = { communism > 0.35 }
				strength_ratio = {
					tag = FROM
					ratio < 0.75
				}
			}
			modifier = {
				add = 100
				political_power_growth < 0.5
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.03 }
			}
		}
	}
	STG_border_propaganda_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_border_propaganda
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
				}
			}
		}
		available = {
			FROM = {
				any_owned_state = {
					is_core_of = ROOT
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_country_flag = STG_border_propaganda_flag } }
			}
		}
		cost = 50
		days_remove = -1
		days_re_enable = 90
		complete_effect = {
			FROM = { set_country_flag = STG_border_propaganda_flag }
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.25
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.1 }
			}
		}
	}
	STG_start_support_communism_in_EQS_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_support_communism_in_EQS
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
					has_idea = STG_start_support_communism_in_EQS_idea
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_idea = STG_start_support_communism_in_EQS_idea } }
			}
		}
		cost = 0
		days_remove = -1
		days_re_enable = 90
		modifier = {
			political_power_gain = -0.1
		}
		complete_effect = {
			FROM = {
				add_ideas = STG_start_support_communism_in_EQS_idea
			}
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism > 0.35 }
				strength_ratio = {
					tag = FROM
					ratio < 0.75
				}
			}
			modifier = {
				factor = 0
				political_power_growth < 0.7
			}
			modifier = {
				add = 10
				FROM = { communism < 0.03 }
			}
		}
	}
	STG_stop_support_communism_in_EQS_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			FROM = {
				has_idea = STG_start_support_communism_in_EQS_idea
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		cost = 0
		complete_effect = {
			remove_targeted_decision = { target = FROM decision =  STG_start_support_communism_in_EQS_dec }
			FROM = {
				remove_ideas = STG_start_support_communism_in_EQS_idea
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				FROM = { communism > 0.35 }
				strength_ratio = {
					tag = FROM
					ratio < 0.75
				}
			}
			modifier = {
				add = 100
				political_power_growth < 0.5
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.03 }
			}
		}
	}
	STG_sabotage_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_sabotage
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
				}
			}
		}
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_country_flag = STG_sabotage_flag } }
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		cost = 50
		days_re_enable = 90
		days_remove = -1
		complete_effect = {
			FROM = { set_country_flag = STG_sabotage_flag }
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.25 }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.1 }
			}
		}
	}
	STG_start_put_pressure_on_celestia_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_put_pressure_on_celestia
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
					has_idea = STG_start_put_pressure_on_celestia_idea
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_idea = STG_start_put_pressure_on_celestia_idea } }
			}
		}
		cost = 0
		days_remove = -1
		days_re_enable = 90
		modifier = {
			political_power_gain = -0.1
		}
		complete_effect = {
			FROM = {
				add_ideas = STG_start_put_pressure_on_celestia_idea
			}
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				political_power_growth < 0.7
			}
		}
	}
	STG_stop_put_pressure_on_celestia_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			FROM = {
				has_idea = STG_start_put_pressure_on_celestia_idea
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		cost = 0
		complete_effect = {
			remove_targeted_decision = { target = FROM decision =  STG_start_put_pressure_on_celestia_dec }
			FROM = {
				remove_ideas = STG_start_put_pressure_on_celestia_idea
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				political_power_growth < 0.5
			}
		}
	}
	STG_infiltrate_army_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_infiltrate_army
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
				}
			}
		}
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_country_flag = STG_infiltrate_army_flag } }
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		cost = 100
		days_re_enable = 90
		days_remove = -1
		complete_effect = {
			FROM = { set_country_flag = STG_infiltrate_army_flag }
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.1 }
			}
		}
	}
	STG_contact_BAL_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_contact_BAL
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_country_flag = STG_contact_BAL_flag } }
			}
		}
		cost = 200
		days_re_enable = 90
		days_remove = -1
		complete_effect = {
			FROM = { set_country_flag = STG_contact_BAL_flag }
		}
		ai_will_do = {
			factor = 7
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.1 }
			}
		}
	}
	STG_contact_VAN_dec = {
		icon = hammer_and_horseshoe_decision
		visible = { 
			has_completed_focus = STG_contact_VAN
			FROM = {
				eqs_not_has_civil_war = yes
				has_government = democratic
				NOT = {
					is_subject_of = ROOT
				}
			}
		}
		target_trigger = { FROM = { tag = event_target:equestria } }
		remove_trigger = {
			hidden_trigger = {
				FROM = { NOT = { has_country_flag = STG_contact_VAN_flag } }
			}
		}
		cost = 100
		days_re_enable = 90
		days_remove = -1
		complete_effect = {
			FROM = { set_country_flag = STG_contact_VAN_flag }
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0.5
				has_war_together_with  = FROM
			}
			modifier = {
				factor = 0
				FROM = { communism < 0.1 }
			}
		}
	}
}

EQS_revolution_in_eqs = {
	EQS_STG_war_breaks_out = {
		icon = generic_ignite_civil_war
		activation = {
			communism > 0.35
			STG = { has_completed_focus = STG_influence_EQS }
		}
		available = {
			communism < 0.35
		}
		is_good = no
		days_mission_timeout = 90
		timeout_effect = {
			STG = { country_event = stalliongrad_eqs_cw.6 }
		}
	}
	EQS_STG_communism_stamped_out = {
		icon = anti_communist
		activation = {
				communism < 0.02
			STG = {
				has_completed_focus = STG_influence_EQS
				NOT = { has_country_flag = STG_EQS_CW_delay_mission }
			}
		}
		available = {
			communism > 0.05
		}
		is_good = yes
		days_mission_timeout = 21
		timeout_effect = {
			effect_tooltip = {
				 event_target:equestria = { country_event = stalliongrad_eqs_cw.8 }
			}
		}
	}
	EQS_basic_anti_commie = {
		icon = anti_communist
		days_remove = -1
		remove_trigger = {
			STG = {
				OR = {
					has_war_with = ROOT
					exists = no
					has_global_flag = STG_CW_EQS_done
				}
			}
		}
		modifier = {
			political_power_gain = -0.05
			communism_drift = -0.01
			stability_factor = -0.05
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.4
			}
			modifier = {
				factor = 0
				communism < 0.1
			}
			modifier = {
				factor = 2
				communism > 0.3
			}
		}
	}
	EQS_anti_commie = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		cost = 150
		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
				has_political_power < 160
			}
			modifier = {
				factor = 0
				communism < 0.2
			}
			modifier = {
				factor = 5
				communism > 0.3
			}
		}
	}
	EQS_remove_start_influence_EQS = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_idea = STG_start_influence_EQS_idea
		}
		cost = 60
		days_re_enable = 90
		complete_effect = {
			remove_ideas = STG_start_influence_EQS_idea
		}
		ai_will_do = {
			factor = 7
			modifier = {
				factor = 0.4
				has_war = yes
				has_political_power < 160
			}
			modifier = {
				factor = 0
				communism < 0.15
			}
			modifier = {
				factor = 5
				communism > 0.25
			}
			modifier = {
				factor = 2
				political_power_growth < 0.8
			}
		}
	}
	EQS_remove_support_communism_in_EQS = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_idea = STG_start_influence_EQS_idea
		}
		cost = 60
		days_re_enable = 90
		complete_effect = {
			remove_ideas = STG_start_support_communism_in_EQS_idea
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.4
				has_war = yes
				has_political_power < 160
			}
			modifier = {
				factor = 0
				communism < 0.2
			}
			modifier = {
				factor = 5
				communism > 0.3
			}
			modifier = {
				factor = 2
				political_power_growth < 0.8
			}
		}
	}
	EQS_remove_put_pressure_on_celestia_dec = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_idea = STG_start_influence_EQS_idea
		}
		cost = 60
		days_re_enable = 90
		complete_effect = {
			remove_ideas = STG_start_put_pressure_on_celestia_idea
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.4
				has_war = yes
				has_political_power < 160
			}
			modifier = {
				factor = 0
				communism < 0.2
			}
			modifier = {
				factor = 5
				communism > 0.3
			}
			modifier = {
				factor = 2
				political_power_growth < 0.8
			}
		}
	}
	EQS_remove_border_propaganda = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_country_flag = STG_border_propaganda_flag
		}
		cost = 50
		days_remove = 60
		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			clr_country_flag = STG_border_propaganda_flag
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.6
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = STG
					ratio < 0.9
				}
			}
		}
	}
	EQS_remove_sabotage = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_country_flag = STG_sabotage_flag
		}
		cost = 20
		days_remove = 60
		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			clr_country_flag = STG_sabotage_flag
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.6
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = STG
					ratio < 0.9
				}
			}
		}
	}
	EQS_remove_infiltrate_army = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_country_flag = STG_infiltrate_army_flag
		}
		cost = 40
		days_remove = 90
		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			clr_country_flag = STG_infiltrate_army_flag
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.6
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = STG
					ratio < 0.9
				}
			}
		}
	}
	EQS_remove_contact_BAL = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_country_flag = STG_contact_BAL_flag
		}
		cost = 40
		days_remove = 90
		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			clr_country_flag = STG_contact_BAL_flag
		}
		ai_will_do = {
			factor = 12
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.6
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = STG
					ratio < 0.9
				}
			}
		}
	}
	EQS_remove_contact_VAN = {
		icon = anti_communist
		days_remove = 0
		days_re_enable = 60
		visible = {
			has_country_flag = STG_contact_VAN_flag
		}
		cost = 20
		days_remove = 60
		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			clr_country_flag = STG_contact_VAN_flag
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.4
				has_war = yes
			}
			modifier = {
				factor = 0
				political_power_growth < 0.6
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = STG
					ratio < 0.9
				}
			}
		}
	}
}