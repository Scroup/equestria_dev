HIP_underwater_construction_cat = {
	HIP_build_underwater_civ_factory = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 50

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_civ value = 1 }
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
		}
	}

	HIP_build_underwater_mil_factory = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_mil value = 1 }
			add_offsite_building = {
				type = arms_factory
				level = 1
			}
		}
	}

	HIP_build_underwater_dockyard = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_dockyard value = 1 }
			add_offsite_building = {
				type = dockyard
				level = 1
			}
		}
	}

	HIP_build_underwater_refinery = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_tech = synth_oil_experiments
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 60

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_refinery value = 1 }
			add_offsite_building = {
				type = synthetic_refinery
				level = 1
			}
		}
	}

	HIP_build_underwater_fuel_silo = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_fuel_silo value = 1 }
			add_offsite_building = {
				type = fuel_silo
				level = 1
			}
		}
	}
}

prospect_for_resources = {
	HIP_deep_sea_oil_extraction = { #685
		
		icon = oil

		allowed = {
			original_tag = HIP
		}
		highlight_states = {
			state = 685
		}
		available = {
			has_completed_focus = HIP_support_the_oil_industry
			num_of_civilian_factories_available_for_projects > 5
			owns_state = 685
			controls_state = 685
		}

		visible = {
			#has_completed_focus = HIP_support_the_oil_industry
			685 = {
				NOT = {
					has_state_flag = {
						flag = deep_sea_oil_developed
						value = 5
					}
				}
			}
		}

		cost = 25
		days_remove = HIP_deep_sea_oil_extraction_duration

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 100
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 }
			685 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = deep_sea_oil_developed
						}
					}
					set_state_flag = {
						flag = deep_sea_oil_developed
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = deep_sea_oil_developed
						value = 1
					}
				}
			}
			685 = {
				add_resource = {
					type = oil
					amount = 12
				}
			}
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 compare = less_than }
				}
				set_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 }
			}
		}
	}
}