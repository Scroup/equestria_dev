add_namespace = stalliongrad_eqs_cw
add_namespace = stalliongrad_eqs_cw_news

#news.5 is the news event for STG joining the war
#equestria.42 has to be rewritten for an option to deny
#equestria.178 is eqs learns about STG refusing
#set ai_weights for help (esp. vasily/sinister difference)

#test event
country_event = {
	id = stalliongrad_eqs_cw.0
	is_triggered_only = yes
	option = {
		STG_resolve_EQS_CW_effects = yes
	}
}
#EVENTS THAT FIRE AFTER STG DECLARES
#Border propaganda
country_event = {
	id = stalliongrad_eqs_cw.1
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.1"}#Auto-logging
	title = stalliongrad_eqs_cw.1.t
	desc = stalliongrad_eqs_cw.1.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.1.a
		STG_border_propaganda_effect = yes
	}
}
#Sabotage
country_event = {
	id = stalliongrad_eqs_cw.2
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.2"}#Auto-logging
	title = stalliongrad_eqs_cw.2.t
	desc = stalliongrad_eqs_cw.2.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.2.a
		add_timed_idea = {
			idea = STG_sabotage_idea
			days = 360
		}
	}
}
#Infiltration
country_event = {
	id = stalliongrad_eqs_cw.3
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.3"}#Auto-logging
	title = stalliongrad_eqs_cw.3.t
	desc = stalliongrad_eqs_cw.3.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.3.a
		STG_infiltrate_army_effect = yes
	}
}
#BAL rises up
country_event = {
	id = stalliongrad_eqs_cw.4
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.4"}#Auto-logging
	title = stalliongrad_eqs_cw.4.t
	desc = stalliongrad_eqs_cw.4.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.4.a
		BAL = {
			transfer_state = 13
			transfer_state = 28
			transfer_state = 27
			transfer_state = 82
			transfer_state = 90
			hidden_effect = {
				remove_ideas = disrupted_communications
				country_event = civwar.110
				country_event = { id = civwar.7 hours = 1 }
				CHN = {
					if = {
						limit = { has_completed_focus = demand_equestria }
						country_event = { id = changelings.12 days = 1 }
					}
				}
			}
			activate_targeted_decision = { target = ROOT decision = BAL_VAN_declare_on_EQS }
			add_ai_strategy = {
				type = antagonize
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = alliance
				id = STG
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = STG
				value = 100
			}
		}
		STG = {
			add_ai_strategy = {
				type = alliance
				id = BAL
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = BAL
				value = 100
			}
		}
		add_ai_strategy = {
			type = antagonize
			id = BAL
			value = 200
		}
		add_ai_strategy = {
			type = conquer
			id = BAL
			value = 200
		}
	}
	option = {
		name = stalliongrad_eqs_cw.4.b
		trigger = { is_ai = no }
		BAL = {
			transfer_state = 13
			transfer_state = 28
			transfer_state = 27
			transfer_state = 82
			transfer_state = 90
			hidden_effect = {
				remove_ideas = disrupted_communications
				country_event = civwar.110
				country_event = { id = civwar.7 hours = 1 }
				CHN = {
					if = {
						limit = { has_completed_focus = demand_equestria }
						country_event = { id = changelings.12 days = 1 }
					}
				}
			}
			activate_targeted_decision = { target = ROOT decision = BAL_VAN_declare_on_EQS }
			add_ai_strategy = {
				type = antagonize
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = ROOT
				value = 200
			}
			change_tag_from = ROOT
			add_ai_strategy = {
				type = alliance
				id = STG
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = STG
				value = 100
			}
		}
		STG = {
			add_ai_strategy = {
				type = alliance
				id = BAL
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = BAL
				value = 100
			}
		}
		add_ai_strategy = {
			type = antagonize
			id = BAL
			value = 200
		}
		add_ai_strategy = {
			type = conquer
			id = BAL
			value = 200
		}
	}
}
#VAN rises up
country_event = {
	id = stalliongrad_eqs_cw.5
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.5"}#Auto-logging
	title = stalliongrad_eqs_cw.5.t
	desc = stalliongrad_eqs_cw.5.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.5.a
		VAN = {
			transfer_state = 14
			transfer_state = 45
			hidden_effect = {
				country_event = civwar.110
				country_event = { id = civwar.3 hours = 1 }
				CHN = {
					if = {
						limit = {
							exists = yes
							has_completed_focus = demand_equestria
						}
						country_event = { id = changelings.10 days = 1 }
					}
				}
			}
			activate_targeted_decision = { target = ROOT decision = BAL_VAN_declare_on_EQS }
			add_ai_strategy = {
				type = antagonize
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = alliance
				id = STG
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = STG
				value = 100
			}
		}
		STG = {
			add_ai_strategy = {
				type = alliance
				id = VAN
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = VAN
				value = 100
			}
		}
		add_ai_strategy = {
			type = antagonize
			id = VAN
			value = 200
		}
		add_ai_strategy = {
			type = conquer
			id = VAN
			value = 200
		}
	}
	option = {
		name = stalliongrad_eqs_cw.5.b
		trigger = { is_ai = no }
		VAN = {
			transfer_state = 14
			transfer_state = 45
			hidden_effect = {
				country_event = civwar.110
				country_event = { id = civwar.3 hours = 1 }
				CHN = {
					if = {
						limit = {
							exists = yes
							has_completed_focus = demand_equestria
						}
						country_event = { id = changelings.10 days = 1 }
					}
				}
			}
			activate_targeted_decision = { target = ROOT decision = BAL_VAN_declare_on_EQS }
			add_ai_strategy = {
				type = antagonize
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = ROOT
				value = 200
			}
			change_tag_from = ROOT
			add_ai_strategy = {
				type = alliance
				id = STG
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = STG
				value = 100
			}
		}
		STG = {
			add_ai_strategy = {
				type = alliance
				id = VAN
				value = 999
			}
			add_ai_strategy = {
				type = support
				id = VAN
				value = 100
			}
		}
		add_ai_strategy = {
			type = antagonize
			id = VAN
			value = 200
		}
		add_ai_strategy = {
			type = conquer
			id = VAN
			value = 200
		}
	}
}
#STG forced to declare
country_event = {
	id = stalliongrad_eqs_cw.6
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.6"}#Auto-logging
	title = stalliongrad_eqs_cw.6.t
	desc = stalliongrad_eqs_cw.6.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.6.a
		add_stability = -0.05
		event_target:equestria = {
			random_list = {
				70 = {}
				30 = { clr_country_flag = STG_border_propaganda_flag }
			}
			random_list = {
				70 = {}
				30 = { clr_country_flag = STG_sabotage_flag }
			}
			random_list = {
				70 = {}
				30 = { clr_country_flag = STG_contact_BAL_flag }
			}
			random_list = {
				70 = {}
				30 = { clr_country_flag = STG_contact_VAL_flag }
			}
		}
		declare_war_on = {
			type = annex_everything
			target = event_target:equestria
		}
	}
	option = {
		name = stalliongrad_eqs_cw.6.b
		add_political_power = -150
		add_stability = -0.05
		add_war_support = -0.1
		set_global_flag = STG_CW_EQS_done
		hidden_effect = { 
			news_event = { id = stalliongrad_eqs_cw_news.2 days = 1 }
		}
	}
}
#No commie support anymore in EQS
country_event = {
	id = stalliongrad_eqs_cw.7
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.7"}#Auto-logging
	title = stalliongrad_eqs_cw.7.t
	desc = stalliongrad_eqs_cw.7.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.7.a
		add_political_power = -150
		add_stability = -0.05
		add_war_support = -0.1
		set_global_flag = STG_CW_EQS_done
	}
}
#No commie support anymore in EQS (for EQS)
country_event = {
	id = stalliongrad_eqs_cw.8
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.8"}#Auto-logging
	title = stalliongrad_eqs_cw.8.t
	desc = stalliongrad_eqs_cw.8.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.8.a
		add_political_power = 50
		add_stability = 0.05
	}
}
#Notification for EQS that STG is starting up shit
country_event = {
	id = stalliongrad_eqs_cw.16
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.16"}#Auto-logging
	title = stalliongrad_eqs_cw.16.t
	desc = stalliongrad_eqs_cw.16.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.16.a
	}
}

#Notification for EQS that STG is really starting up shit
country_event = {
	id = stalliongrad_eqs_cw.17
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.17"}#Auto-logging
	title = stalliongrad_eqs_cw.17.t
	desc = stalliongrad_eqs_cw.17.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.17.a
	}
}

#Notification for STG that EQS accepted their help
country_event = {
	id = stalliongrad_eqs_cw.9
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.9"}#Auto-logging
	title = stalliongrad_eqs_cw.9.t
	desc = stalliongrad_eqs_cw.9.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.9.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = STG_EQS_military_cooperation
			}
			reverse_add_opinion_modifier = {
				target = FROM
				modifier = STG_EQS_military_cooperation
			}
		}
	}
}

#Notification for STG that EQS refused their help
country_event = {
	id = stalliongrad_eqs_cw.10
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.10"}#Auto-logging
	title = stalliongrad_eqs_cw.10.t
	desc = stalliongrad_eqs_cw.10.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.10.a
	}
}

#Notification for EQS that STG agreed to help
country_event = {
	id = stalliongrad_eqs_cw.11
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.11"}#Auto-logging
	title = stalliongrad_eqs_cw.11.t
	desc = stalliongrad_eqs_cw.11.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.11.a
		add_opinion_modifier = {
			target = FROM
			modifier = STG_EQS_refused_military_cooperation
		}
	}
}

#STG/EQS asks other side about cooperation
country_event = {
	id = stalliongrad_eqs_cw.12
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.12"}#Auto-logging
	title = stalliongrad_eqs_cw.12.t
	desc = stalliongrad_eqs_cw.12.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	#Agree
	option = {
		name = stalliongrad_eqs_cw.12.a
		FROM = { 
			add_opinion_modifier = {
				target = ROOT
				modifier = STG_EQS_cooperation
			}
			reverse_add_opinion_modifier = {
				target = ROOT
				modifier = STG_EQS_cooperation
			}
			set_global_flag = STG_EQS_cooperation_flag
			country_event = { id = stalliongrad_eqs_cw.13 days = 1 } 
		}
	}
	#Deny
	option = {
		name = stalliongrad_eqs_cw.12.b
		FROM = {
			add_opinion_modifier = {
				target = FROM
				modifier = STG_EQS_refused_cooperation
			}
			country_event = { id = stalliongrad_eqs_cw.14 days = 1 } 
		}
	}
}

#Notification for EQS/STG that FROM agreed to cooperate
country_event = {
	id = stalliongrad_eqs_cw.13
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.13"}#Auto-logging
	title = stalliongrad_eqs_cw.13.t
	desc = stalliongrad_eqs_cw.13.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.13.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = ROOT
				modifier = STG_EQS_cooperation
			}
			reverse_add_opinion_modifier = {
				target = ROOT
				modifier = STG_EQS_cooperation
			}
		}
	}
}

#Notification for EQS/STG that FROM refused to cooperate
country_event = {
	id = stalliongrad_eqs_cw.14
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.14"}#Auto-logging
	title = stalliongrad_eqs_cw.14.t
	desc = stalliongrad_eqs_cw.14.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.14.a
		effect_tooltip = {
			reverse_add_opinion_modifier = {
				target = FROM
				modifier = STG_EQS_refused_cooperation
			}
		}
	}
}

#Notification for EQS/STG of a state visit
country_event = {
	id = stalliongrad_eqs_cw.15
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw.15"}#Auto-logging
	title = stalliongrad_eqs_cw.15.t
	desc = stalliongrad_eqs_cw.15.d
	picture = GFX_event_stg_red_army
	is_triggered_only = yes
	option = {
		name = stalliongrad_eqs_cw.15.a
		add_political_power = 100
		if = {
			limit = {
				tag = STG
				NOT = { has_country_flag = claimed_EQS_territory_already }
			}
		}
	}
}

#Pressure on EQS Government
news_event = {
	id = stalliongrad_eqs_cw_news.1
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw_news.1"}#Auto-logging
	title = stalliongrad_eqs_cw_news.1.t
	desc = stalliongrad_eqs_cw_news.1.d
	picture = GFX_news_event_stalliongrad
	is_triggered_only = yes
	option = {
		trigger = { has_government = communism }
		name = stalliongrad_eqs_cw_news.1.a
	}
	option = {
		trigger = { has_government = democratic }
		name = stalliongrad_eqs_cw_news.1.b
	}
	option = {
		trigger = { 
			NOT = {
				has_government = communism
				has_government = democratic
			}
		}
		name = stalliongrad_eqs_cw_news.1.c
	}
}

#STG does not declare on EQS
news_event = {
	id = stalliongrad_eqs_cw_news.2
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw_news.2"}#Auto-logging
	title = stalliongrad_eqs_cw_news.2.t
	desc = stalliongrad_eqs_cw_news.2.d
	picture = GFX_news_event_stalliongrad
	is_triggered_only = yes
	option = {
		trigger = { 
			has_government = communism 
			NOT = { tag = STG }
		}
		name = stalliongrad_eqs_cw_news.2.a
	}
	option = {
		trigger = { 
			has_government = democratic
			NOT = { tag = event_target:equestria }
		}
		name = stalliongrad_eqs_cw_news.2.b
	}
	option = {
		trigger = { 
			NOT = {
				has_government = communism
				has_government = democratic
				tag = STG
			}
		}
		name = stalliongrad_eqs_cw_news.2.c
	}
	option = {
		trigger = { tag = STG }
		name = stalliongrad_eqs_cw_news.2.e
	}
	option = {
		trigger = { tag = event_target:equestria }
		name = stalliongrad_eqs_cw_news.2.f
	}
}

#STG declares on EQS
news_event = {
	id = stalliongrad_eqs_cw_news.3
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw_news.3"}#Auto-logging
	title = stalliongrad_eqs_cw_news.3.t
	desc = stalliongrad_eqs_cw_news.3.d
	picture = GFX_news_event_stalliongrad
	is_triggered_only = yes
	option = {
		trigger = { 
			OR = {
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
			}
		 }
		name = stalliongrad_eqs_cw_news.3.a
	}
	option = {
		trigger = { 
			OR = {
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
			}
		 }
		name = stalliongrad_eqs_cw_news.3.b
	}
	option = {
		trigger = { 
			NOT = {
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
			}
		}
		name = stalliongrad_eqs_cw_news.3.c
	}
}

#STG pursues detente
news_event = {
	id = stalliongrad_eqs_cw_news.4
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw_news.4"}#Auto-logging
	title = stalliongrad_eqs_cw_news.4.t
	desc = stalliongrad_eqs_cw_news.4.d
	picture = GFX_news_event_stalliongrad
	is_triggered_only = yes
	option = {
		trigger = { 
			OR = {
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
			}
		 }
		name = stalliongrad_eqs_cw_news.4.a
	}
	option = {
		trigger = { 
			NOT = {
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
			}
		 }
		name = stalliongrad_eqs_cw_news.4.b
	}
}

#STG-EQS state visit
news_event = {
	id = stalliongrad_eqs_cw_news.5
	immediate = {log = "[Root.GetName]: event stalliongrad_eqs_cw_news.5"}#Auto-logging
	title = stalliongrad_eqs_cw_news.5.t
	desc = stalliongrad_eqs_cw_news.5.d
	picture = GFX_news_event_stalliongrad
	is_triggered_only = yes
	option = {
		trigger = { 
			OR = {
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
			}
		 }
		name = stalliongrad_eqs_cw_news.5.a
	}
	option = {
		trigger = { 
			NOT = {
				tag = STG
				is_subject_of = STG
				is_in_faction_with = STG
				tag = event_target:equestria
				is_subject_of = event_target:equestria
				is_in_faction_with = event_target:equestria
			}
		 }
		name = stalliongrad_eqs_cw_news.5.b
	}
}